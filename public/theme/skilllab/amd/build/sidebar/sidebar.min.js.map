{"version":3,"file":"sidebar.min.js","sources":["../../src/sidebar/sidebar.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * AMD module\n *\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'],\n    function ($) {\n        return {\n            init: function (e, student_user) {\n\n                /// for pop up\n                // document.addEventListener(\"DOMContentLoaded\", function () {\n                const continueBtn = document.querySelector(\"#student-pop-up-continue\");\n                const studentPopup = document.querySelector(\"#popup-csc\");\n                const studentBackDrop = document.querySelector(\".student-popup-backdrop\");\n                const popUpContainer = document.querySelector(\".student-info-popup\");\n                const crossButton = document.querySelector(\"#cross-student-popup\");\n\n                /**\n                 *\n                 */\n                function handleClosePopup() {\n                    studentPopup?.classList.remove(\"active-popup\");\n                }\n                studentBackDrop.addEventListener(\"click\", handleClosePopup);\n                popUpContainer.addEventListener(\"click\", (ee) => {\n                    ee.stopPropagation();\n                });\n                crossButton.addEventListener(\"click\", handleClosePopup);\n                continueBtn.addEventListener(\"click\", handleClosePopup);\n                // });\n                // pop-up-end\n\n                let interval = setInterval(function () {\n                    ($(e).find('a')).removeClass('cm-items-csc');\n                    var top = $(e).parent().parent().parent();\n                    var section = $(e).parent().parent();\n                    if (top.attr('id')) {\n                        const section_id = (section.attr('id')).replace(/[^0-9]/g, \"\");\n                        $('#courseindexsection' + section_id + ' a').removeClass(' collapsed ');\n                        section.addClass(' show ');\n                        if (student_user == 1) {\n                            $('.locked-cm').click(function () {\n                                $('#popup-csc').addClass(' active-popup ');\n                                return false;\n                            });\n\n                            setTimeout(function () {\n                                var complete_cm = $('#course-index div .courseindex-item-content ul li');\n                                complete_cm = Object.values(complete_cm);\n                                var i = 0;\n                                for (i; i < complete_cm.length; i++) {\n                                    var content = $(complete_cm[i].innerHTML);\n                                    if (content.hasClass('completion_complete')) {\n                                        var data_id = $(content[2]).attr('id');\n                                        var a_point = $('#' + data_id);\n                                        a_point.removeClass('cm-items-csc');\n                                    }\n                                }\n                                $('.cm-items-csc').click(function () {\n                                    var complete = $('.activity-complete .completion-info button').text();\n                                    if ($.trim(complete) == 'Mark as done') {\n                                        $('#popup-csc').addClass(' active-popup ');\n                                        return false;\n                                    }\n                                });\n                            }, 1000);\n                        }\n                        clearInterval(interval);\n                    }\n                }, 1000);\n\n                if (student_user == 1) {\n                    $('#next-activity-link').click(function () {\n                        var complete = $('.activity-complete .completion-info button').text();\n                        if ($.trim(complete) == 'Mark as done') {\n                            $('#popup-csc').addClass(' active-popup ');\n                            return false;\n                        }\n                    });\n                }\n\n\n            }\n        };\n\n    }\n);\n"],"names":["define","$","init","e","student_user","continueBtn","document","querySelector","studentPopup","studentBackDrop","popUpContainer","crossButton","handleClosePopup","classList","remove","addEventListener","ee","stopPropagation","interval","setInterval","find","removeClass","top","parent","section","attr","section_id","replace","addClass","click","setTimeout","complete_cm","Object","values","i","length","content","innerHTML","hasClass","data_id","complete","text","trim","clearInterval"],"mappings":";;;;;AAsBAA,wCAAO,CAAC,WACJ,SAAUC,SACC,CACHC,KAAM,SAAUC,EAAGC,oBAITC,YAAcC,SAASC,cAAc,4BACrCC,aAAeF,SAASC,cAAc,cACtCE,gBAAkBH,SAASC,cAAc,2BACzCG,eAAiBJ,SAASC,cAAc,uBACxCI,YAAcL,SAASC,cAAc,iCAKlCK,mBACLJ,MAAAA,cAAAA,aAAcK,UAAUC,OAAO,gBAEnCL,gBAAgBM,iBAAiB,QAASH,kBAC1CF,eAAeK,iBAAiB,SAAUC,KACtCA,GAAGC,qBAEPN,YAAYI,iBAAiB,QAASH,kBACtCP,YAAYU,iBAAiB,QAASH,sBAIlCM,SAAWC,aAAY,WACtBlB,EAAEE,GAAGiB,KAAK,KAAMC,YAAY,oBACzBC,IAAMrB,EAAEE,GAAGoB,SAASA,SAASA,SAC7BC,QAAUvB,EAAEE,GAAGoB,SAASA,YACxBD,IAAIG,KAAK,MAAO,OACVC,WAAcF,QAAQC,KAAK,MAAOE,QAAQ,UAAW,IAC3D1B,EAAE,sBAAwByB,WAAa,MAAML,YAAY,eACzDG,QAAQI,SAAS,UACG,GAAhBxB,eACAH,EAAE,cAAc4B,OAAM,kBAClB5B,EAAE,cAAc2B,SAAS,mBAClB,KAGXE,YAAW,eACHC,YAAc9B,EAAE,qDACpB8B,YAAcC,OAAOC,OAAOF,qBACxBG,EAAI,EACAA,EAAIH,YAAYI,OAAQD,IAAK,KAC7BE,QAAUnC,EAAE8B,YAAYG,GAAGG,cAC3BD,QAAQE,SAAS,uBAAwB,KACrCC,QAAUtC,EAAEmC,QAAQ,IAAIX,KAAK,MACnBxB,EAAE,IAAMsC,SACdlB,YAAY,iBAG5BpB,EAAE,iBAAiB4B,OAAM,eACjBW,SAAWvC,EAAE,8CAA8CwC,UACvC,gBAApBxC,EAAEyC,KAAKF,iBACPvC,EAAE,cAAc2B,SAAS,mBAClB,OAGhB,MAEPe,cAAczB,aAEnB,KAEiB,GAAhBd,cACAH,EAAE,uBAAuB4B,OAAM,eACvBW,SAAWvC,EAAE,8CAA8CwC,UACvC,gBAApBxC,EAAEyC,KAAKF,iBACPvC,EAAE,cAAc2B,SAAS,mBAClB"}