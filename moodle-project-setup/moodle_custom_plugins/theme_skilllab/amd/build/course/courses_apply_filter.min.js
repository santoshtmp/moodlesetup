/**
 * AMD module
 *
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("theme_skilllab/course/courses_apply_filter",["jquery"],(function($){var course_list_table=$("#course-list-table"),filter_form=$("#course-filter-form"),submit_form=$("#filter-submit"),clear_form=$("#filter-clear"),form_action_url=filter_form.attr("action");function table_pagination_number_click(){$("#course-list-table nav ul li a").click((function(){return getXMLHttpRequestData($(this).attr("href")),!1}))}function table_header_sort_click(){$("#course-list-table .skl-courses-table thead th a").click((function(){var header_sort_url=$(this).attr("href"),form_data=filter_form.serialize();return getXMLHttpRequestData(header_sort_url+"&"+form_data),show_clear_form_btn(form_data),!1}))}function getXMLHttpRequestData(submissionLink){course_list_table.css("opacity","0.6");var get_response=$.post(submissionLink+"&table_only=true","",(function(data,status){if("success"===status){var html_data=data;course_list_table.html(html_data),window.history.replaceState("","url",submissionLink)}else window.console.log("!!! error on loading course list table ... ")}));return get_response.fail((function(){course_list_table.html("<p class='failed-to-load'>Fail on loading data try again.</p>")})),get_response.done((function(){course_list_table.css("opacity","1"),single_clear_filter_item(),table_header_sort_click(),table_pagination_number_click()})),get_response}function show_clear_form_btn(form_data){var form_data_each=form_data.split("&"),check=!1;return $.each(form_data_each,(function(index,value){value.split("=")[1]&&(check=!0)})),check?clear_form.removeClass("skilllab_hide"):clear_form.addClass("skilllab_hide"),check}function single_clear_filter_item(){const clear_filter_item=$(".clear-filter-item"),filter_form=$("#course-filter-form");clear_filter_item.click((function(){var data_id=$(this).parent().attr("data-id");"checkbox"==$("#"+data_id).attr("type")?$("#"+data_id).prop("checked",!1):$("#"+data_id).val("");var form_data=filter_form.serialize(),submissionLink=form_action_url+"?"+form_data+"&treset=1";show_clear_form_btn(form_data)?getXMLHttpRequestData(submissionLink):getXMLHttpRequestData(form_action_url+"?treset=1")}))}return{init:function(){table_pagination_number_click(),table_header_sort_click(),submit_form.click((function(){var form_data=filter_form.serialize(),submissionLink=form_action_url+"?"+form_data+"&treset=1",form_data_each=form_data.split("&");$.each(form_data_each,(function(index,value){value.split("=")[1]&&getXMLHttpRequestData(submissionLink).done((function(){clear_form.removeClass("skilllab_hide")}))}))})),clear_form.click((function(){filter_form[0].reset(),$("#search_input").val(""),getXMLHttpRequestData(form_action_url+"?treset=1").done((function(){clear_form.addClass("skilllab_hide")}))})),$("#course-category-filter").on("change",(function(){var new_category=$("#course-category-filter").val(),add_course_link=$("#btn-add-course").attr("href");new_category?(add_course_link=add_course_link.split("category")[0]+"category="+new_category,$("#btn-add-course").attr("href",add_course_link)):(add_course_link=add_course_link.split("category")[0]+"category=0",$("#btn-add-course").attr("href",add_course_link))})),single_clear_filter_item(),$("#search_input").keypress((function(event){if("13"==(event.keyCode?event.keyCode:event.which)){var form_data=filter_form.serialize(),submissionLink=form_action_url+"?"+form_data+"&treset=1",form_data_each=form_data.split("&");return $.each(form_data_each,(function(index,value){value.split("=")[1]&&getXMLHttpRequestData(submissionLink).done((function(){clear_form.removeClass("skilllab_hide")}))})),!1}}))}}}));

//# sourceMappingURL=courses_apply_filter.min.js.map